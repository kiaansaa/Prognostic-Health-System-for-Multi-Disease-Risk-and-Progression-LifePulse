{% extends 'main.html' %}
{% block content %}
<div class="container mt-5">
    <div class="card shadow-lg p-4">
        <h2 class="text-center">Prediction Result</h2>
        <hr>

        <div class="text-center">
            {% if pred == 1 %}
                <h3 class="text-danger">You are at risk of {{ disease.replace('_', ' ').title() }}.</h3>
                <p>Please consult a healthcare professional.</p>
            {% else %}
                <h3 class="text-success">You are not at risk of {{ disease.replace('_', ' ').title() }}.</h3>
                <p>Maintain a healthy lifestyle.</p>
            {% endif %}
        </div>

        {% if health_score is not none %}
        <div class="mt-5 text-center">
            <h4>Your Health Score: 
                <span class="{% if health_score > 80 %}text-success
                             {% elif health_score > 50 %}text-warning
                             {% else %}text-danger{% endif %}">
                    {{ health_score }}/100
                </span>
            </h4>

            <!-- Score Range Legend -->
            <div class="mt-3">
                <p>
                    <strong>Score Guide:</strong><br>
                    <span class="text-success">80â€“100</span>: Low Risk â€“ Keep it up!<br>
                    <span class="text-warning">51â€“79</span>: Moderate Risk â€“ Some lifestyle changes advised.<br>
                    <span class="text-danger">0â€“50</span>: High Risk â€“ Please consult your doctor soon.
                </p>
            </div>

            <!-- Disease-Specific Suggestions -->
            <div class="alert alert-info mt-4" role="alert">
                {% if disease == 'diabetes' %}
                    {% if health_score < 60 %}
                        Consider reducing sugar and carb intake, increase activity, and consult a dietician.
                    {% elif health_score < 80 %}
                        You're doing okay. Keep tracking your glucose, and maintain regular exercise.
                    {% else %}
                        Great job! Maintain your current healthy habits.
                    {% endif %}
                {% elif disease == 'heart' %}
                    {% if health_score < 60 %}
                        Avoid saturated fats, reduce salt, and consider a heart checkup.
                    {% elif health_score < 80 %}
                        Monitor your BP and cholesterol regularly.
                    {% else %}
                        Strong cardiovascular health! Keep it up.
                    {% endif %}
                {% elif disease == 'kidney' %}
                    {% if health_score < 60 %}
                        Limit protein, drink plenty of water, and reduce sodium intake.
                    {% elif health_score < 80 %}
                        Consider kidney-friendly foods and track your hydration.
                    {% else %}
                        Your kidney metrics are healthy.
                    {% endif %}
                {% elif disease == 'liver' %}
                    {% if health_score < 60 %}
                        Avoid alcohol, stay hydrated, and eat fiber-rich foods.
                    {% elif health_score < 80 %}
                        Monitor liver enzymes and reduce fatty foods.
                    {% else %}
                        Good liver health. Maintain balanced nutrition.
                    {% endif %}
                {% elif disease == 'breast_cancer' %}
                    {% if health_score < 60 %}
                        Consider regular screenings and maintain a healthy weight.
                    {% elif health_score < 80 %}
                        Continue self-examinations and eat antioxidant-rich foods.
                    {% else %}
                        Great! Keep up healthy habits and regular checkups.
                    {% endif %}
                {% endif %}
            </div>
        </div>
        {% endif %}

        <div class="text-center mt-4">
            <a href="/" class="btn btn-primary">Back to Home</a>
        </div>

        <div class="text-center mt-3">
            <a href="{{ url_for('static', filename='lime_explanation.html') }}" target="_blank" class="btn btn-outline-dark">
                ðŸ§  View LIME Explanation
            </a>
        </div>

    </div>
</div>
{% endblock %}
